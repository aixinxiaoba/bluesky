(function(){window.addEventListener("DOMContentLoaded",function(){function e(e,t){this.iframe=window.frames[e],this.element=document.getElementById(e),this.callbacks=t||{},this.init()}e.Util={getData:function(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},getDomain:function(e){var e=e+"/";return e.substr(0,e.indexOf("/",e.indexOf(":")+3))}},e.prototype={init:function(){var t=this,n=e.Util.getData(t.element,"src");this.origin=e.Util.getDomain(n)||"*",window.addEventListener("message",function(e){t.receive(e)},!1),t.element.addEventListener("load",function(){t.send({type:"init"})},!1),t.element.src=n,t.element.removeAttribute("data-src")},send:function(e){this.iframe.postMessage(e,this.origin)},receive:function(e){var t=new RegExp("^"+this.origin,"i");if(t.test(e.origin)){var n=e.data;if(typeof n=="string")try{n=JSON.parse(n)}catch(r){}typeof n=="object"&&typeof n.statu=="string"&&(n.height&&typeof (parseInt(n.height),10)=="number"&&(this.element.style.height=parseInt(n.height,10)+"px"),this.trigger(n.statu,n))}},trigger:function(e,t){var n=this.callbacks,t=t||{};n.hasOwnProperty(e)&&typeof n[e]=="function"&&n[e].call(this,t)}};var t=document.getElementById("ob360_area_first");if(t){var n=document.location.search,r="ob360query",i=window.navigator.userAgent,s=document.location.host,o=n.indexOf(r);if(o>-1){var u=n.substr(o+r.length).match(/^(?:[^=]*=)([^&#=]+)/);if(u[1].length){var a=document.createElement("iframe"),f="ob360_area_first_iframe",l={id:f,name:f,width:"100%",frameBorder:0},c;for(c in l)l.hasOwnProperty(c)&&(a[c]=l[c]);a.setAttribute("data-src","http://wp.onebox.so.com/NewsPage/sug?query="+u[1]+"&ua="+encodeURI(i)+"&host="+encodeURI(s)+"&_t="+ +(new Date)),a.style.height="0px",t.appendChild(a),new e(f)}}}},!1)})();